<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>फिंगर ट्रैकिंग कंट्रोल</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f9;
            color: #333;
            overflow: hidden; /* पेज को स्क्रॉल होने से रोकें */
        }
        .container {
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #444;
            margin-bottom: 10px;
        }
        #info {
            margin-bottom: 25px;
            font-size: 1.1em;
            color: #555;
        }
        #button-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .button {
            padding: 20px 30px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            background-color: #007aff;
            color: white;
            border-radius: 8px;
            transition: transform 0.2s ease, background-color 0.2s ease;
            font-weight: 600;
        }
        .button:hover, .button.hover-active {
            background-color: #0056b3;
            transform: scale(1.05);
        }
        #cursor {
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: rgba(255, 59, 48, 0.7);
            border: 2px solid white;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            display: none; /* शुरुआत में छिपा हुआ */
            transition: background-color 0.2s, transform 0.2s;
            z-index: 9999;
        }
        #cursor.clicked {
            background-color: rgba(52, 199, 89, 0.9);
            transform: translate(-50%, -50%) scale(1.4);
        }
        /* कैमरा व्यू को छिपाने के लिए */
        .input_video {
            display: none;
        }
    </style>
    <!-- MediaPipe लाइब्रेरी इम्पोर्ट करें -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
</head>
<body>

    <!-- कैमरा फ़ीड के लिए वीडियो एलिमेंट (यह दिखाई नहीं देगा) -->
    <video class="input_video"></video>

    <div class="container">
        <h1>हैंड जेस्चर कंट्रोल</h1>
        <p id="info">कैमरे के सामने अपनी तर्जनी (Index Finger) उंगली का प्रयोग करें।<br>क्लिक करने के लिए अंगूठे और तर्जनी को मिलाएं (चुटकी काटें)।</p>

        <div id="button-container">
            <button class="button" onclick="openNewPage('https://www.google.com')">Google</button>
            <button class="button" onclick="openNewPage('https://www.youtube.com')">YouTube</button>
            <button class="button" onclick="openNewPage('https://www.wikipedia.org')">Wikipedia</button>
            <button class="button" onclick="openNewPage('https://github.com')">GitHub</button>
            <button class="button" onclick="openNewPage('https://www.amazon.com')">Amazon</button>
            <button class="button" onclick="openNewPage('https://www.facebook.com')">Facebook</button>
            <button class="button" onclick="openNewPage('https://twitter.com')">Twitter</button>
            <button class="button" onclick="openNewPage('https://www.instagram.com')">Instagram</button>
            <button class="button" onclick="openNewPage('https://www.linkedin.com')">LinkedIn</button>
        </div>
    </div>

    <!-- यह कर्सर उंगली को फॉलो करेगा -->
    <div id="cursor"></div>

    <script>
        // DOM एलिमेंट्स को चुनें
        const videoElement = document.querySelector('.input_video');
        const cursor = document.getElementById('cursor');
        const buttons = document.querySelectorAll('.button');

        // एक ग्लोबल वैरिएबल यह ट्रैक करने के लिए कि क्या चुटकी का इशारा किया गया है
        let isPinched = false;
        let lastHoveredButton = null;

        // किसी बटन पर क्लिक होने पर नया पेज खोलने का फंक्शन
        function openNewPage(url) {
            window.open(url, '_blank');
        }

        // जब MediaPipe हाथ का पता लगाता है तो यह फंक्शन चलता है
        function onResults(results) {
            cursor.style.display = 'none'; // हर फ्रेम पर कर्सर को छिपाएं

            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                // पहले हाथ के लैंडमार्क लें
                const landmarks = results.multiHandLandmarks[0];
                
                // तर्जनी उंगली की नोक (Landmark #8)
                const indexFingerTip = landmarks[8];
                
                // अंगूठे की नोक (Landmark #4)
                const thumbTip = landmarks[4];
                
                // normalized निर्देशांक (0 से 1) को स्क्रीन पिक्सेल में बदलें
                // वीडियो मिरर होता है, इसलिए x-अक्ष को उल्टा (1 - x) करते हैं
                const x = window.innerWidth * (1 - indexFingerTip.x);
                const y = window.innerHeight * indexFingerTip.y;
                
                // कर्सर को दिखाएं और उसकी स्थिति अपडेट करें
                cursor.style.display = 'block';
                cursor.style.left = `${x}px`;
                cursor.style.top = `${y}px`;
                
                // कर्सर के नीचे कौन सा एलिमेंट है, यह पता करें
                const elementUnderCursor = document.elementFromPoint(x, y);

                // होवर इफ़ेक्ट को मैनेज करें
                if (lastHoveredButton && lastHoveredButton !== elementUnderCursor) {
                    lastHoveredButton.classList.remove('hover-active');
                }
                if (elementUnderCursor && elementUnderCursor.classList.contains('button')) {
                    elementUnderCursor.classList.add('hover-active');
                    lastHoveredButton = elementUnderCursor;
                } else {
                    lastHoveredButton = null;
                }
                
                // चुटकी (पिंच) के इशारे का पता लगाएं
                const distance = Math.sqrt(
                    Math.pow(indexFingerTip.x - thumbTip.x, 2) +
                    Math.pow(indexFingerTip.y - thumbTip.y, 2)
                );
                
                const pinchThreshold = 0.04; // चुटकी के लिए दूरी की सीमा

                if (distance < pinchThreshold) {
                    // अगर चुटकी अभी-अभी शुरू हुई है
                    if (!isPinched) {
                        isPinched = true;
                        cursor.classList.add('clicked');
                        
                        // अगर कर्सर एक बटन के ऊपर है, तो उस पर क्लिक करें
                        if (elementUnderCursor && elementUnderCursor.classList.contains('button')) {
                           elementUnderCursor.click();
                        }
                    }
                } else {
                    // जब चुटकी खत्म हो जाए
                    if (isPinched) {
                        isPinched = false;
                        cursor.classList.remove('clicked');
                    }
                }
            } else {
                 // अगर कोई हाथ नहीं मिला, तो होवर इफ़ेक्ट हटा दें
                 if(lastHoveredButton) {
                    lastHoveredButton.classList.remove('hover-active');
                    lastHoveredButton = null;
                 }
            }
        }

        // MediaPipe Hands को कॉन्फ़िगर करें
        const hands = new Hands({
            locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });

        hands.setOptions({
            maxNumHands: 1, // केवल एक हाथ को ट्रैक करें
            modelComplexity: 1,
            minDetectionConfidence: 0.7,
            minTrackingConfidence: 0.7
        });

        // रिजल्ट के लिए कॉलबैक सेट करें
        hands.onResults(onResults);

        // कैमरे को शुरू करें
        const camera = new Camera(videoElement, {
            onFrame: async () => {
                await hands.send({ image: videoElement });
            },
            width: 640,
            height: 480
        });
        camera.start();

    </script>

</body>
</html>                const wrist = landmarks[0];
                
                // 1. कर्सर अपडेट करें (स्क्रीन के अनुसार)
                const x = window.innerWidth * (1 - indexTip.x);
                const y = window.innerHeight * indexTip.y;
                cursor.style.display = 'block';
                cursor.style.left = `${x}px`;
                cursor.style.top = `${y}px`;
                
                // 2. कूलडाउन चेक करें
                if (now - lastActionTime < ACTION_DEBOUNCE_MS) {
                    lastIndexX = indexTip.x;
                    lastIndexY = indexTip.y;
                    lastWristY = wrist.y;
                    return;
                }

                // --- जेस्चर 1: प्ले/पॉज (खुली हथेली को स्थिर रखना) ---
                const isHandOpen = Math.sqrt(
                    Math.pow(indexTip.x - thumbTip.x, 2) + Math.pow(indexTip.y - thumbTip.y, 2)
                ) > PINCH_THRESHOLD; 
                
                const isHandStill = Math.abs(indexTip.x - lastIndexX) < HAND_STILL_THRESHOLD && 
                                    Math.abs(indexTip.y - lastIndexY) < HAND_STILL_THRESHOLD;

                if (isHandOpen && isHandStill) {
                    if (stillnessTimer === 0) {
                        stillnessTimer = now;
                    } else if (now - stillnessTimer > STILLNESS_TIME_MS) {
                        ytPlayPause();
                        lastActionTime = now;
                        stillnessTimer = 0; // रीसेट
                        return;
                    }
                } else {
                    stillnessTimer = 0; // हाथ हिलने पर रीसेट
                }


                // --- जेस्चर 2/3: सीक फॉरवर्ड/बैकवर्ड (तर्जनी का तेज स्वाइप) ---
                const indexDeltaX = indexTip.x - lastIndexX;
                const timeDelta = now - lastActionTime; 
                const indexSpeedX = Math.abs(indexDeltaX) / (timeDelta / 1000);

                if (indexSpeedX > SWIPE_SENSITIVITY * 20) { // तेज़ गति की जाँच
                    if (indexDeltaX < 0) { // बाएँ (आगे +10s)
                        ytSeek(10);
                        lastActionTime = now;
                        return;
                    } else if (indexDeltaX > 0) { // दाएँ (पीछे -10s)
                        ytSeek(-10);
                        lastActionTime = now;
                        return;
                    }
                }

                // --- जेस्चर 4/5: वॉल्यूम कंट्रोल (तर्जनी का ऊपर/नीचे मूवमेंट) ---
                if (Math.abs(indexDeltaY) > VERTICAL_MOVEMENT_THRESHOLD) { 
                     if (indexDeltaY < 0) { // ऊपर की ओर (Volume Up)
                        ytChangeVolume(5);
                        lastActionTime = now;
                        return;
                    } else if (indexDeltaY > 0) { // नीचे की ओर (Volume Down)
                        ytChangeVolume(-5);
                        lastActionTime = now;
                        return;
                    }
                }

                // --- जेस्चर 6/7: पेज स्क्रॉलिंग (कलाई का मूवमेंट) ---
                const SCROLL_SPEED = 0.015; // थोड़ी और सेंसिटिविटी
                const wristDeltaY = wrist.y - lastWristY;
                
                if (Math.abs(wristDeltaY) > SCROLL_SPEED && now - lastActionTime > 500) { 
                    // अगर कलाई हिल रही है, तो पेज स्क्रॉल करें
                    const scrollAmount = Math.sign(wristDeltaY) * 100; 
                    window.scrollBy(0, -scrollAmount); // ऊपर/नीचे के लिए साइन बदलना
                }
                
                // 4. अगले फ्रेम के लिए वर्तमान स्थिति सहेजें
                lastIndexX = indexTip.x;
                lastIndexY = indexTip.y;
                lastWristY = wrist.y;
                
            } else {
                stillnessTimer = 0; // हाथ गायब होने पर रीसेट
                lastWristY = 0;
                cursor.style.display = 'none';
            }
        }


        // ======================================================================
        // IV. MEDIAPIPE और कैमरा सेटअप
        // ======================================================================

        const hands = new Hands({
            locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });

        hands.setOptions({
            maxNumHands: 1, 
            modelComplexity: 1,
            minDetectionConfidence: 0.8,
            minTrackingConfidence: 0.8
        });

        hands.onResults(onResults);

        const camera = new Camera(videoElement, {
            onFrame: async () => {
                await hands.send({ image: videoElement });
            },
            width: 640,
            height: 480
        });

        // कैमरे को शुरू करने के लिए 3 सेकंड का विलंब
        setTimeout(() => {
            camera.start();
            updateStatus('कैमरा शुरू हो गया है।', 'Init');
        }, 3000); 
        
    </script>

</body>
</html>
